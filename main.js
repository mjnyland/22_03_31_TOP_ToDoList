(()=>{"use strict";const e=(e,t)=>({addTodo:function(e,o,d,n){const c={id:t.length>0?t[t.length-1].id+1:1,title:e,descrip:o,date:d,priority:n,complete:!1};t.push(c)},editTodo:function(e,o,d,n,c){t=t.map((t=>t.id===e?(t.id=e,t.title=o,t.descrip=d,t.date=n,t.priority=c,t):t))},getTodos:function(){return t},deleteTodo:function(e){t=t.filter((t=>t.id!==e))},toggleTodo:function(e){t=t.map((t=>{t.id===e&&(t.complete=!t.complete)}))},todos:t,name:e});function t(e,t,o){const d=document.createElement(e,t);return t&&d.classList.add(t),o&&(d.textContent=o),d}function o(e){const o=document.querySelector(".todos-cont");e.getTodos().length>0&&e.getTodos().forEach((e=>{!function(e,o,d,n,c){const i=t("DIV","todo");i.classList.add(o);const a=t("DIV","todo-info-cont"),s=t("DIV","checkbox-container"),l=t("SPAN","todo-checkbox-checked"),r=t("SPAN","todo-checkbox");s.append(l,r);const u=t("H3","todo-title",d),h=t("H4","todo-date",n),p=t("P","todo-descrip",c),m=t("DIV","amend-todo-cont"),f=t("H5","delete-todo-link","Delete todo"),g=t("H5","edit-todo-link","Edit todo");m.append(g,f),a.append(s,u,h,p,m);const v=t("DIV","todo-edit-form-cont"),q=t("INPUT","edit-title-input");q.id="edit-todo-title",q.setAttribute("type","text");const T=t("LABEL","edit-title-label");T.htmlFor="edit-todo-title",T.textContent="Title:";const y=t("INPUT","edit-descrip-input");y.id="edit-todo-descrip",y.setAttribute("type","text");const L=t("LABEL","edit-descrip-label");L.htmlFor="edit-todo-description",L.textContent="Description:";const k=t("INPUT","edit-date-input");k.id="edit-todo-date",k.setAttribute("type","date");const S=t("LABEL","edit-date-label");S.htmlFor="edit-todo-date",S.textContent="Date:";const b=t("BUTTON","edit-todo-form-button","Update Todo");v.append(T,q,L,y,S,k,b);const j=t("HR","todo-hr");i.append(a,v,j),e.append(i)}(o,e.id,e.title,e.date,e.descrip)}))}function d(e,o){const d=document.querySelector(".projects-cont"),n=t("DIV","project"),c=t("H3","project-label",e);n.classList.add(o),n.append(c),d.append(n)}function n(e,t){e.style.display=t}function c(e){localStorage.clear();const t={stored:[]};for(const o of e){console.log(o);const e=(e,t,o)=>({name:e,id:t,todos:o});console.log(e(o.name,o.id,o.getTodos())),t.stored.push(e(o.name,o.id,o.getTodos()))}localStorage.setItem("projects",JSON.stringify(t)),localStorage.setItem("active",document.querySelector(".active").classList[1])}const i=(()=>{const t=document.querySelector(".new-project-button-cont"),a=document.querySelector(".new-project-form"),s=document.querySelector(".add-project-button"),l=document.querySelector(".projects-cont"),r=document.querySelector(".todos-cont"),u=document.querySelector(".project-heading"),h=document.querySelector(".new-todo-button"),p=document.querySelector(".new-todo-form");document.querySelector(".todo-edit-form");let m=[];return{findMatchProj:function(e){const t=parseInt(e);for(const e of m)if(e.id===t)return e},loadTodos:function(e,t,d){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),o(t),c(d)},handlePageLoad:function(){if(localStorage.length>0){JSON.parse(localStorage.getItem("projects")).stored.forEach((t=>{const o=e(t.name,t.todos);o.id=t.id,m.push(o),d(o.name,o.id)}));const t=parseInt(localStorage.getItem("active")),n=this.findMatchProj(t);l.children[t].classList.add("active"),u.textContent=n.name,o(n)}else m=[e("Inbox",[])],m[0].id=0,d(m[0].name,m[0].id),document.querySelector(".project").classList.add("active")},handleNewProjectRequest:function(){t.addEventListener("click",(e=>{n(a,"block")}))},handleAddProjectRequest:function(){s.addEventListener("click",(t=>{const o=document.getElementById("project-name");if(""===o.value)alert("Project must have a name");else{const t=e(o.value,[]);m.push(t),t.id=m.length-1,n(a,"none"),d(o.value,t.id),c(m)}}))},handleProjectChangeRequest:function(){document.addEventListener("click",(e=>{if("project"===e.target.classList[0]){t=document.querySelector(".active"),o=e.target,t.classList.remove("active"),o.classList.add("active");const d=this.findMatchProj(e.target.classList[1]);u.textContent=d.name,this.loadTodos(r,d,m)}var t,o}))},handleNewTodoRequest:function(){h.addEventListener("click",(e=>{n(p,"block")}))},handleAddTodoRequest:function(e){document.querySelector(".add-todo-button").addEventListener("click",(e=>{n(p,"none");const t=document.getElementById("todo-title").value,o=document.getElementById("todo-descrip").value,d=document.getElementById("todo-date").value;if(t){const e=document.querySelector(".active"),n=this.findMatchProj(e.classList[1]);n.addTodo(t,o,d,1),this.loadTodos(r,n,m),function(e){for(const t of e.children)"INPUT"===t.nodeName&&(t.value="")}(p)}else alert("todo must have a title :)")}))},handleEditTodoRequest:function(){document.addEventListener("click",(e=>{if("edit-todo-link"===e.target.className){const d=e.target.parentNode.parentNode,c=d.parentNode.children[1];t=c,o=d,console.log(o),t.children[1].value=o.children[1].textContent,t.children[3].value=o.children[3].textContent,t.children[5].value=o.children[2].textContent,n(d,"none"),n(c,"grid")}var t,o}))},handleUpdateTodoRequest:function(){document.addEventListener("click",(e=>{if("edit-todo-form-button"===e.target.className){const t=e.target.parentNode,o=t.parentNode;let d=document.querySelector(".active"),c=this.findMatchProj(d.classList[1]);c.editTodo(parseInt(o.classList[1]),t.children[1].value,t.children[3].value,t.children[5].value),n(t,"none"),this.loadTodos(r,c,m)}}))},handleDeleteTodoRequest:function(){document.addEventListener("click",(e=>{if("delete-todo-link"===e.target.className){console.log("delete");const t=document.querySelector(".active"),o=this.findMatchProj(t.classList[1]),d=parseInt(e.target.parentNode.parentNode.parentNode.classList[1]);o.deleteTodo(d),this.loadTodos(r,o,m)}}))},handleCheckboxClick:function(){document.addEventListener("click",(e=>{const t=document.querySelector(".todo-checkbox");"todo-checkbox"===e.target.className&&("#FFF"===t.style.backgroundColor?(console.log("switch to purp"),t.style.backgroundColor="var(--darkPurp)"):(console.log("switch to white"),t.style.backgroundColor="#FFF"))}))},instantiateWebsite:function(){i.handlePageLoad(),i.handleProjectChangeRequest(),i.handleNewProjectRequest(),i.handleAddProjectRequest(),i.handleNewTodoRequest(),i.handleAddTodoRequest(),i.handleEditTodoRequest(),i.handleUpdateTodoRequest(),i.handleDeleteTodoRequest(),i.handleCheckboxClick()}}})();i.instantiateWebsite()})();
//# sourceMappingURL=main.js.map