(()=>{"use strict";const e=(e,t)=>({addTodo:function(e,o,n,d){const c={id:t.length>0?t[t.length-1].id+1:1,title:e,descrip:o,date:n,priority:d,complete:!1};t.push(c)},editTodo:function(e,o,n,d,c){t=t.map((t=>t.id===e?(t.id=e,t.title=o,t.descrip=n,t.date=d,t.priority=c,t):t))},getTodos:function(){return t},deleteTodo:function(e){t=t.filter((t=>t.id!==e))},toggleTodo:function(e){t=t.map((t=>{t.id===e&&(t.complete=!t.complete)}))},todos:t,name:e});function t(e,t,o){const n=document.createElement(e,t);return t&&n.classList.add(t),o&&(n.textContent=o),n}function o(e){const o=document.querySelector(".todos-cont"),n=document.querySelector(".projects-delete-link");0===e.id?n.style.display="none":n.style.display="block",e.getTodos().length>0&&e.getTodos().forEach((e=>{!function(e,o,n,d,c){const i=t("DIV","todo");i.classList.add(o);const a=t("DIV","todo-info-cont"),s=t("DIV","checkbox-container"),l=t("SPAN","todo-checkbox-checked"),r=t("SPAN","todo-checkbox");s.append(l,r);const u=t("H3","todo-title",n),h=t("H4","todo-date",d),m=t("P","todo-descrip",c),p=t("DIV","amend-todo-cont"),f=t("H5","delete-todo-link","Delete todo"),g=t("H5","edit-todo-link","Edit todo");p.append(g,f),a.append(s,u,h,m,p);const v=t("DIV","todo-edit-form-cont"),y=t("INPUT","edit-title-input");y.id="edit-todo-title",y.setAttribute("type","text");const q=t("LABEL","edit-title-label");q.htmlFor="edit-todo-title",q.textContent="Title:";const T=t("INPUT","edit-descrip-input");T.id="edit-todo-descrip",T.setAttribute("type","text");const L=t("LABEL","edit-descrip-label");L.htmlFor="edit-todo-description",L.textContent="Description:";const j=t("INPUT","edit-date-input");j.id="edit-todo-date",j.setAttribute("type","date");const S=t("LABEL","edit-date-label");S.htmlFor="edit-todo-date",S.textContent="Date:";const N=t("BUTTON","edit-todo-form-button","Update Todo");v.append(q,y,L,T,S,j,N);const P=t("HR","todo-hr");i.append(a,v,P),e.append(i)}(o,e.id,e.title,e.date,e.descrip)}))}function n(e,t){e.classList.remove("active"),t.classList.add("active")}function d(e,o){const n=document.querySelector(".projects-cont"),d=t("DIV","project"),c=t("H3","project-label",e);d.classList.add(o),d.append(c),n.append(d)}function c(e,t){e.style.display=t}function i(e){localStorage.clear();const t={stored:[]};for(const o of e){const e=(e,t,o)=>({name:e,id:t,todos:o});t.stored.push(e(o.name,o.id,o.getTodos()))}localStorage.setItem("projects",JSON.stringify(t)),localStorage.setItem("active",document.querySelector(".active").classList[1])}const a=(()=>{const t=document.querySelector(".new-project-button-cont"),s=document.querySelector(".new-project-form"),l=document.querySelector(".add-project-button"),r=document.querySelector(".projects-cont"),u=document.querySelector(".todos-cont"),h=document.querySelector(".project-heading"),m=document.querySelector(".new-todo-button-cont"),p=document.querySelector(".new-todo-form");document.querySelector(".todo-edit-form");let f=[];return{findMatchProj:function(e){const t=parseInt(e);for(const e of f)if(e.id===t)return e},loadTodos:function(e,t,n){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),o(t),i(n)},handlePageLoad:function(){if(localStorage.length>0){JSON.parse(localStorage.getItem("projects")).stored.forEach((t=>{const o=e(t.name,t.todos);o.id=t.id,f.push(o),d(o.name,o.id)}));const t=parseInt(localStorage.getItem("active")),n=this.findMatchProj(t);r.children[t].classList.add("active"),h.textContent=n.name,o(n)}else f=[e("Inbox",[])],f[0].id=0,d(f[0].name,f[0].id),document.querySelector(".project").classList.add("active")},handleNewProjectRequest:function(){t.addEventListener("click",(e=>{c(s,"grid")}))},handleAddProjectRequest:function(){l.addEventListener("click",(t=>{const o=document.getElementById("project-name");let n=!1;for(const e of f)if(console.log(e.name),console.log(o.textContent),e.name===o.value){n=!0;break}if(""===o.value)alert("Project must have a name");else if(n)alert("Project already created");else{const t=e(o.value,[]);f.push(t),t.id=f.length-1,c(s,"none"),d(o.value,t.id),i(f)}}))},handleProjectChangeRequest:function(){document.addEventListener("click",(e=>{if(console.log(e.target),"project"===e.target.classList[0]){n(document.querySelector(".active"),e.target);const t=this.findMatchProj(e.target.classList[1]);h.textContent=t.name,this.loadTodos(u,t,f)}}))},handleNewTodoRequest:function(){m.addEventListener("click",(e=>{c(p,"grid")}))},handleAddTodoRequest:function(e){document.querySelector(".add-todo-button").addEventListener("click",(e=>{c(p,"none");const t=document.getElementById("todo-title").value,o=document.getElementById("todo-descrip").value,n=document.getElementById("todo-date").value;if(t){const e=document.querySelector(".active"),d=this.findMatchProj(e.classList[1]);d.addTodo(t,o,n,1),this.loadTodos(u,d,f),function(e){for(const t of e.children)"INPUT"===t.nodeName&&(t.value="")}(p)}else alert("todo must have a title :)")}))},handleEditTodoRequest:function(){document.addEventListener("click",(e=>{if("edit-todo-link"===e.target.className){const n=e.target.parentNode.parentNode,d=n.parentNode.children[1];o=n,(t=d).children[1].value=o.children[1].textContent,t.children[3].value=o.children[3].textContent,t.children[5].value=o.children[2].textContent,c(n,"none"),c(d,"grid")}var t,o}))},handleUpdateTodoRequest:function(){document.addEventListener("click",(e=>{if("edit-todo-form-button"===e.target.className){const t=e.target.parentNode,o=t.parentNode;let n=document.querySelector(".active"),d=this.findMatchProj(n.classList[1]);d.editTodo(parseInt(o.classList[1]),t.children[1].value,t.children[3].value,t.children[5].value),c(t,"none"),this.loadTodos(u,d,f)}}))},handleDeleteTodoRequest:function(){document.addEventListener("click",(e=>{if("delete-todo-link"===e.target.className||"todo-checkbox"===e.target.className){const t=document.querySelector(".active"),o=this.findMatchProj(t.classList[1]),n=parseInt(e.target.parentNode.parentNode.parentNode.classList[1]);o.deleteTodo(n),this.loadTodos(u,o,f)}}))},handleProjectDelete:function(){document.addEventListener("click",(e=>{if("projects-delete-link"===e.target.className){const e=document.querySelector(".active"),t=this.findMatchProj(e.classList[1]);f=f.filter((e=>e.id!==t.id)),n(document.querySelector(".active"),r.children[0]),h.textContent=f[0].name,this.loadTodos(u,f[0],f),r.children[t.id].remove()}}))},instantiateWebsite:function(){a.handlePageLoad(),a.handleProjectChangeRequest(),a.handleNewProjectRequest(),a.handleAddProjectRequest(),a.handleNewTodoRequest(),a.handleAddTodoRequest(),a.handleEditTodoRequest(),a.handleUpdateTodoRequest(),a.handleDeleteTodoRequest(),a.handleProjectDelete()}}})();a.instantiateWebsite()})();
//# sourceMappingURL=main.js.map